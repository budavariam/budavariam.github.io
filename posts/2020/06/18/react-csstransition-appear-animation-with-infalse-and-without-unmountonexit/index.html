<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>React CSSTransition appear animation with in=false and without unmountOnExit | Mátyás Budavári</title><meta name=keywords content="programming,javascript,react,css,my-solution"><meta name=description content="React Transition group is a great library for animations in react.
I want to share my experience on how to have an appear animation on components that are mounted with an in={false} property."><meta name=author content="Mátyás Budavári"><link rel=canonical href=http://budavariam.github.io/posts/2020/06/18/react-csstransition-appear-animation-with-infalse-and-without-unmountonexit/><meta name=google-site-verification content="ocrG4G5ZSn2awC0mgHAsgk2qlhd3IAXCACgWNrqJcwY"><link href=/assets/css/stylesheet.min.c9f9aa52356f85ed41fec6cf7298763aa52dff31e80e6225ccfb71c0df2ba9f9.css integrity="sha256-yfmqUjVvhe1B/sbPcph2OqUt/zHoDmIlzPtxwN8rqfk=" rel="preload stylesheet" as=style><link rel=icon href=http://budavariam.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://budavariam.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://budavariam.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://budavariam.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://budavariam.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-115499513-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="React CSSTransition appear animation with in=false and without unmountOnExit"><meta property="og:description" content="React Transition group is a great library for animations in react.
I want to share my experience on how to have an appear animation on components that are mounted with an in={false} property."><meta property="og:type" content="article"><meta property="og:url" content="http://budavariam.github.io/posts/2020/06/18/react-csstransition-appear-animation-with-infalse-and-without-unmountonexit/"><meta property="og:image" content="http://budavariam.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:published_time" content="2020-06-18T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-18T00:00:00+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://budavariam.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="React CSSTransition appear animation with in=false and without unmountOnExit"><meta name=twitter:description content="React Transition group is a great library for animations in react.
I want to share my experience on how to have an appear animation on components that are mounted with an in={false} property."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://budavariam.github.io/posts/"},{"@type":"ListItem","position":2,"name":"React CSSTransition appear animation with in=false and without unmountOnExit","item":"http://budavariam.github.io/posts/2020/06/18/react-csstransition-appear-animation-with-infalse-and-without-unmountonexit/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"React CSSTransition appear animation with in=false and without unmountOnExit","name":"React CSSTransition appear animation with in=false and without unmountOnExit","description":"React Transition group is a great library for animations in react. I want to share my experience on how to have an appear animation on components that are mounted with an …","keywords":["programming","javascript","react","css","my-solution"],"articleBody":"React Transition group is a great library for animations in react. I want to share my experience on how to have an appear animation on components that are mounted with an in={false} property.\nMy only constraint was hat I could not use unmountOnExit property.\nWhen the component mounted, it showed up immediately without the fade-in effect, then when it actually should have shown, then the animation started. I had to make sure that the component do not show up before the fade-in animation happens.\nAs stated in the docs, the in={false} setting prevents any classes applied to the component with CSSTransition.\n If the transition component mounts with in={false}, no classes are applied yet. You might be expecting *-exit-done, but if you think about it, a component cannot finish exiting if it hasn’t entered yet.\n Bummer.\nSo the first time we see the component, it won’t have any classes added to it. And later on it will only have classes that has a suffix like *.enter-done. Then how do we apply an effect to it?\nI came up with a simple solution. The classNames property can be any string, and the additional classes will be applied to the end of it. For example my-node will be transformed to my-node-enter on enter.\nI needed a way to know when the initial transition has happened.\nIf I set a string with a space in it, then technically it will apply 2 classes. It add a suffix to the last one only, and evidently the first untouched one will mark that CSSTransitionGroup has changed the classes, while giving us a class to easily check it.\nCSSTransition in={falseAtFirst} key=\"unique\" timeout={200} classNames=\"css-transition-applied hello-world-message\"  span className=\"message\"Hello world/span /CSSTransition Then with this css I can assure that the component do not show up prematurely.\n.message:not(.css-transition-applied) { display: none; } Hope you won’t need this.\nHappy coding!\n","wordCount":"309","inLanguage":"en","datePublished":"2020-06-18T00:00:00Z","dateModified":"2020-06-18T00:00:00Z","author":{"@type":"Person","name":"Mátyás Budavári"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://budavariam.github.io/posts/2020/06/18/react-csstransition-appear-animation-with-infalse-and-without-unmountonexit/"},"publisher":{"@type":"Organization","name":"Mátyás Budavári","logo":{"@type":"ImageObject","url":"http://budavariam.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=http://budavariam.github.io/ accesskey=h title="Mátyás Budavári (Alt + H)" class=site-avatar><img src=/avatar.png alt=logo aria-label=logo height=70></a><div class=site-info><h1 class=site-name><a href=http://budavariam.github.io/ accesskey=h title="Mátyás Budavári (Alt + H)">Mátyás Budavári</a></h1><p class=site-description>Developer from Szeged</p></div></div><ul id=menu onscroll=menu_on_scroll()><li><a href=http://budavariam.github.io/about/ title=About><span>About</span></a></li><li><a href=http://budavariam.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=http://budavariam.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://budavariam.github.io/archives/ title=Archive><span>Archive</span></a></li><span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>React CSSTransition appear animation with in=false and without unmountOnExit</h1><div class=post-meta>June 18, 2020&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Mátyás Budavári</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner></div></details></div><div class=post-content><p><a href=http://reactcommunity.org/react-transition-group/css-transition>React Transition group</a> is a great library for animations in react.
I want to share my experience on how to have an appear animation on components that are mounted with an <code>in={false}</code> property.</p><p>My only constraint was hat I could not use <code>unmountOnExit</code> property.</p><p>When the component mounted, it showed up immediately without the fade-in effect, then when it actually should have shown, then the animation started.
I had to make sure that the component do not show up before the fade-in animation happens.</p><p>As stated in the docs, the <code>in={false}</code> setting prevents any classes applied to the component with <code>CSSTransition</code>.</p><blockquote><p>If the transition component mounts with in={false}, no classes are applied yet.
You might be expecting *-exit-done, but if you think about it,
a component cannot finish exiting if it hasn&rsquo;t entered yet.</p></blockquote><p>Bummer.</p><p>So the first time we see the component, it won&rsquo;t have any classes added to it. And later on it will only have classes that has a suffix like <code>*.enter-done</code>.
Then how do we apply an effect to it?</p><p>I came up with a simple solution. The <code>classNames</code> property can be any string,
and the additional classes will be applied to the end of it.
For example <code>my-node</code> will be transformed to <code>my-node-enter</code> on enter.</p><p>I needed a way to know when the initial transition has happened.</p><p>If I set a string with a space in it, then technically it will apply 2 classes.
It add a suffix to the last one only, and evidently the first untouched one will mark that
<code>CSSTransitionGroup</code> has changed the classes, while giving us a class to easily check it.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>CSSTransition</span> <span style=color:#66d9ef>in</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>falseAtFirst</span>} <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;unique&#34;</span> <span style=color:#a6e22e>timeout</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>200</span>}
    <span style=color:#a6e22e>classNames</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;css-transition-applied hello-world-message&#34;</span>
<span style=color:#f92672>&gt;</span>
<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>span</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;message&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Hello</span> <span style=color:#a6e22e>world</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/span&gt;</span>
<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/CSSTransition&gt;</span>
</code></pre></div><p>Then with this css I can assure that the component do not show up prematurely.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css>.<span style=color:#a6e22e>message</span>:<span style=color:#a6e22e>not</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>css-transition-applied</span><span style=color:#f92672>)</span> {
    <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>none</span>;
}
</code></pre></div><p>Hope you won&rsquo;t need this.</p><p>Happy coding!</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://budavariam.github.io/tags/programming/>programming</a></li><li><a href=http://budavariam.github.io/tags/javascript/>javascript</a></li><li><a href=http://budavariam.github.io/tags/react/>react</a></li><li><a href=http://budavariam.github.io/tags/css/>css</a></li><li><a href=http://budavariam.github.io/tags/my-solution/>my-solution</a></li></ul><div class=share-buttons><div class=addthis_inline_share_toolbox></div><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-602c2f70bcebfd93"></script></div></div></footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"budavariam"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2021 <a href=http://budavariam.github.io/>Mátyás Budavári</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>