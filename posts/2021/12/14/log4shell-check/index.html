<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Log4Shell Check | Mátyás Budavári</title><meta name=keywords content="security,java,log4shell,docker"><meta name=description content="Unless you were under a rock for the past couple of days, I assume you&rsquo;ve heard about log4shell.
The RCE exploit of the popular Java logging module log4j, that caused havoc all over the internet.
I haven&rsquo;t worked with Java for years, but I&rsquo;m curious if my projects are vulnerable to this exploit. Let&rsquo;s find out."><meta name=author content="Mátyás Budavári"><meta name=theme-color content="#317EFB"><link rel=canonical href=https://budavariam.github.io/posts/2021/12/14/log4shell-check/><meta name=google-site-verification content="ocrG4G5ZSn2awC0mgHAsgk2qlhd3IAXCACgWNrqJcwY"><link href=/assets/css/stylesheet.min.8992a6674f694d99a84bca35962c31e8f7c81352f54d3e95def071e7d30507dd.css integrity="sha256-iZKmZ09pTZmoS8o1liwx6PfIE1L1TT6V3vBx59MFB90=" rel="preload stylesheet" as=style><script src=https://kit.fontawesome.com/68da183384.js crossorigin=anonymous></script>
<link rel=icon href=https://budavariam.github.io/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://budavariam.github.io/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://budavariam.github.io/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://budavariam.github.io/favicon/apple-icon-180x180.png><link rel=mask-icon href=https://budavariam.github.io/favicon/apple-icon-180x180.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.3"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-115499513-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="Log4Shell Check"><meta property="og:description" content="Unless you were under a rock for the past couple of days, I assume you&rsquo;ve heard about log4shell.
The RCE exploit of the popular Java logging module log4j, that caused havoc all over the internet.
I haven&rsquo;t worked with Java for years, but I&rsquo;m curious if my projects are vulnerable to this exploit. Let&rsquo;s find out."><meta property="og:type" content="article"><meta property="og:url" content="https://budavariam.github.io/posts/2021/12/14/log4shell-check/"><meta property="og:image" content="https://budavariam.github.io/images/2021-12-14-log4shell-check/cover.jpeg"><meta property="article:published_time" content="2021-12-14T00:00:00+00:00"><meta property="article:modified_time" content="2021-12-14T00:00:00+00:00"><meta property="og:site_name" content="Mátyás Budavári"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://budavariam.github.io/images/2021-12-14-log4shell-check/cover.jpeg"><meta name=twitter:title content="Log4Shell Check"><meta name=twitter:description content="Unless you were under a rock for the past couple of days, I assume you&rsquo;ve heard about log4shell.
The RCE exploit of the popular Java logging module log4j, that caused havoc all over the internet.
I haven&rsquo;t worked with Java for years, but I&rsquo;m curious if my projects are vulnerable to this exploit. Let&rsquo;s find out."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://budavariam.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Log4Shell Check","item":"https://budavariam.github.io/posts/2021/12/14/log4shell-check/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Log4Shell Check","name":"Log4Shell Check","description":"Unless you were under a rock for the past couple of days, I assume you\u0026amp;rsquo;ve heard about log4shell. The RCE exploit of the popular Java logging module log4j, that caused havoc …","keywords":["security","java","log4shell","docker"],"articleBody":"Unless you were under a rock for the past couple of days, I assume you’ve heard about log4shell. The RCE exploit of the popular Java logging module log4j, that caused havoc all over the internet. I haven’t worked with Java for years, but I’m curious if my projects are vulnerable to this exploit. Let’s find out.\nIf you prefer, you can call it CVE-2021-44228.\nThe Main problem I found a great tool log4j-detector to check my source codes for nested embedded log4j versions. My problem with it is that it’s written in Java, and I didn’t want to spend time installing it into my machine.\nI like to work with docker, so I decided to run in it. After a few minutes of search I did not find any suitable image, so I decided to create one instead.\nI put my code on my github repo.\nLuckily it did not find any vulnerable version :) hooray.\nI know that it does not mean that everything is in perfect condition. But it’s as good as the tool gets. I will look deeper into this issue to know how to defend against it.\nConclusion I’m sure things will move pretty fast, and there will be uprising tools to look for these issues and fix them. Hopefully, we can get over it soon.\nHappy coding!\n.twitter-tweet { font: 14px/1.45 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif; border-left: 4px solid #2b7bb9; padding-left: 1.5em; color: #555; } .twitter-tweet a { color: #2b7bb9; text-decoration: none; } blockquote.twitter-tweet a:hover, blockquote.twitter-tweet a:focus { text-decoration: underline; }  official logo for log4shell pic.twitter.com/DMEmPYJ7Mx\n— Kevin Beaumont (@GossiTheDog) December 10, 2021","wordCount":"266","inLanguage":"en","image":"https://budavariam.github.io/images/2021-12-14-log4shell-check/cover.jpeg","datePublished":"2021-12-14T00:00:00Z","dateModified":"2021-12-14T00:00:00Z","author":{"@type":"Person","name":"Mátyás Budavári"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://budavariam.github.io/posts/2021/12/14/log4shell-check/"},"publisher":{"@type":"Organization","name":"Mátyás Budavári","logo":{"@type":"ImageObject","url":"https://budavariam.github.io/favicon/favicon.ico"}}}</script><script src=https://cdn.lr-ingest.io/LogRocket.min.js crossorigin=anonymous></script>
<script>window.LogRocket&&window.LogRocket.init("0igxfm/budavariam-blog"),window.LogRocket.getSessionURL(function(e){ga("send",{hitType:"event",eventCategory:"LogRocket",eventAction:e})})</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://budavariam.github.io/ title="Mátyás Budavári (Alt + H)" class=site-avatar><img src=/avatar.png alt=logo aria-label=logo height=70 width=70></a><div class=site-info><h1 class=site-name><a href=https://budavariam.github.io/ accesskey=h title="Mátyás Budavári (Alt + H)">Mátyás Budavári</a></h1><p class=site-description>Developer from Szeged</p></div></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://budavariam.github.io/about/ title=About><span>About</span></a></li><li><a href=https://budavariam.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://budavariam.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://budavariam.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://budavariam.github.io/projects/ title=Projects><span>Projects</span></a></li><li><span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Log4Shell Check</h1><div class=post-meta>December 14, 2021&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Mátyás Budavári
|&nbsp;<a class=edit-post href=https://github.com/budavariam/budavariam.github.io/blob/main/content/posts/2021-12-14-log4shell-check.md rel="noopener noreferrer" target=_blank>Make it better</a></div></header><figure class=entry-cover><img src=https://budavariam.github.io/images/2021-12-14-log4shell-check/cover.jpeg alt="Log4Shell logo"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#the-main-problem aria-label="The Main problem">The Main problem</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><p>Unless you were under a rock for the past couple of days, I assume you&rsquo;ve heard about log4shell.
The <a href=https://en.wikipedia.org/wiki/Arbitrary_code_execution>RCE</a> exploit of the popular Java logging module <a href=https://logging.apache.org/log4j/2.x/>log4j</a>, that caused havoc all over the internet.
I haven&rsquo;t worked with Java for years, but I&rsquo;m curious if my projects are vulnerable to this exploit. Let&rsquo;s find out.</p><p>If you prefer, you can call it <a href=https://www.cvedetails.com/cve/CVE-2021-44228/>CVE-2021-44228</a>.</p><h2 id=the-main-problem>The Main problem<a hidden class=anchor aria-hidden=true href=#the-main-problem>#</a></h2><p>I found a great tool <a href=https://github.com/mergebase/log4j-detector>log4j-detector</a> to check my source codes for nested embedded log4j versions.
My problem with it is that it&rsquo;s written in Java, and I didn&rsquo;t want to spend time installing it into my machine.</p><p>I like to work with docker, so I decided to run in it. After a few minutes of search
I did not find any suitable image, so I decided to create one instead.</p><p>I put my code on my <a href=https://github.com/budavariam/log4j-detector-docker>github repo</a>.</p><p>Luckily it did not find any vulnerable version :) hooray.</p><p>I know that it does not mean that everything is in perfect condition. But it&rsquo;s as good as the tool gets.
I will look deeper into this issue to know how to defend against it.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>I&rsquo;m sure things will move pretty fast, and there will be uprising tools to look for these issues and fix them.
Hopefully, we can get over it soon.</p><p>Happy coding!</p><style type=text/css>.twitter-tweet{font:14px/1.45 '-apple-system',BlinkMacSystemFont,segoe ui,Roboto,Oxygen-Sans,Ubuntu,Cantarell,helvetica neue,sans-serif;border-left:4px solid #2b7bb9;padding-left:1.5em;color:#555}.twitter-tweet a{color:#2b7bb9;text-decoration:none}blockquote.twitter-tweet a:hover,blockquote.twitter-tweet a:focus{text-decoration:underline}</style><blockquote class=twitter-tweet><p lang=en dir=ltr>official logo for log4shell <a href=https://t.co/DMEmPYJ7Mx>pic.twitter.com/DMEmPYJ7Mx</a></p>&mdash; Kevin Beaumont (@GossiTheDog) <a href="https://twitter.com/GossiTheDog/status/1469252646745874435?ref_src=twsrc%5Etfw">December 10, 2021</a></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://budavariam.github.io/tags/security/>security</a></li><li><a href=https://budavariam.github.io/tags/java/>java</a></li><li><a href=https://budavariam.github.io/tags/log4shell/>log4shell</a></li><li><a href=https://budavariam.github.io/tags/docker/>docker</a></li></ul><div class=share-buttons><div class=addthis_inline_share_toolbox></div><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-602c2f70bcebfd93"></script></div></div></footer><script async data-uid=7d9354cde4 src=https://fabulous-experimenter-1073.ck.page/7d9354cde4/index.js></script><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//budavariam.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2022 <a href=https://budavariam.github.io/>Mátyás Budavári</a></span>
<span>&#183;</span>
<wbr><span>Powered&nbsp;by&nbsp;<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<wbr><span>Theme&nbsp;<a href=https://github.com/budavariam/hugo-PaperMod/tree/budavariam rel=noopener target=_blank>PaperMod&nbsp;(custom)</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<script defer src=/assets/js/copybtn.min.4ca2683e6d39c944ce34447501348e9b7c2805874fc5f1023f9534ecd3dd2b59.js integrity="sha256-TKJoPm05yUTONER1ATSOm3woBYdPxfECP5U07NPdK1k="></script>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById("menu").scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById("menu").scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>